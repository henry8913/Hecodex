{{ 'section-slideshow-thumbs.css' | asset_url | stylesheet_tag }}
{{ 'section-image-banner.css' | asset_url | stylesheet_tag }}
{%- if section.settings.slide_height == 'adapt_image' and section.blocks.first.settings.image != blank -%}
  {%- style -%}
    @media screen and (max-width: 749px) {
      #Slider-{{ section.id }}::before,
      #Slider-{{ section.id }} .media::before,
      #Slider-{{ section.id }}:not(.banner--mobile-bottom) .banner__content::before {
        padding-bottom: {{ 1 | divided_by: section.blocks.first.settings.image.aspect_ratio | times: 100 }}%;
        content: '';
        display: block;
      }
    }

    @media screen and (min-width: 750px) {
      #Slider-{{ section.id }}::before,
      #Slider-{{ section.id }} .media::before {
        padding-bottom: {{ 1 | divided_by: section.blocks.first.settings.image.aspect_ratio | times: 100 }}%;
        content: '';
        display: block;
      }
    }
  {%- endstyle -%}
{%- endif -%}
{%- style -%}
    {% for block in section.blocks %}
      h6.banner__sub_heading.subheading_spacing{
    letter-spacing: 3px;
    }
      {% endfor %}
    @media screen and (max-width: 749px) {
            .slideshow__media::after {
                opacity: {{ section.settings.image_overlay_opacity | divided_by: 100.0 }};
            }
    }
      .slideshow-section{position:relative;overflow: hidden;}
      .swiper-container.gallery-thumbs-{{ section.id }} {
          /* width: 60px;
          height: 240px; */
          position: absolute;
          margin-left: auto;
          margin-right: auto;
          right: max(calc((100% - var(--page-width)) / 2 - 10px),3vw);
          z-index: 1;
          bottom: 6vw;
      }
      .rtl-mode .swiper-container.gallery-thumbs-{{ section.id }} {
        right: auto;
        left: max(calc((100% - var(--page-width)) / 2 - 10px), 3vw);
      }
      .swiper-slide {
      background-size: cover;
      background-position: center;
      }

      .gallery-thumbs-{{ section.id }} .swiper-wrapper {
      cursor: grab;
      flex-direction: column;
      gap: 1.5rem;
        align-items: center;
      }

      .gallery-thumbs-{{ section.id }} .swiper-wrapper .swiper-slide > img{
        object-fit: cover;
        border-radius: 0;
        overflow: hidden;
        height: auto;
        max-width: 200px;
        min-height: 100px;
        cursor: pointer;
        opacity: 0.8;
        display: block;
      }

    .gallery-top-{{ section.id }} ~ .gallery-thumbs-{{ section.id }} .swiper-slide.swiper-slide-thumb-active img{
      opacity: 1;
    }
    .gallery-top-{{ section.id }} ~ .gallery-thumbs-{{ section.id }} .swiper-slide{background: transparent;display: flex;align-items: center;justify-content: center;width: 200px !important;}
    banner__box content-container content-container--full-width-mobile color-
    .slideshow-section{overflow: hidden;}
    .slideshow-section .swiper{overflow: visible;}

    @media screen and (max-width: 749px){
      .swiper-container.gallery-thumbs-{{ section.id }} {display: none;}
    }
    @media screen and (min-width: 577px) and (max-width: 749px){
      .swiper-container.gallery-thumbs-{{ section.id }} {top: auto; bottom: 40px;}
    }
    .swiper-slide.slideshow-thumb svg.placeholder-svg { width: 100%; height: auto; border-radius: 0; cursor: pointer;}
    @media screen and (min-width: {{ settings.page_width | plus: 100 }}px){
       .slideshow-section .banner__content--bottom-left.banner--desktop-transparent .banner__box{padding-left:0;}
    }
{%- endstyle -%}
{%- liquid
  assign sizes = '100vw'
  assign widths = '375, 550, 750, 1100, 1500, 1780, 2000, 3000, 3840'
  assign mWidths = '375, 550, 750, 1100'
  assign fetch_priority = 'auto'
  if section.index == 1
    assign fetch_priority = 'high'
  endif
%}
<div
  id="slideshow-thumbs"
  class="slideshow-section  {% if section.settings.page_full_width %} page-full-width {% else %} page-width {% endif %} {% if section.settings.page_full_width_spacing %} page-full-width_spacing {% endif %} "
>
  <div class="swiper swiper-container gallery-top-{{ section.id }}">
    <div
      class="swiper-wrapper slide-banner  banner--{{ section.settings.slide_height }} {% if section.settings.show_text_below %} banner--mobile-bottom{% endif %}{% if section.blocks.first.settings.image == blank %} slideshow--placeholder{% endif %}"
      id="Slider-{{ section.id }}"
    >
      {%- for block in section.blocks -%}
        {%- liquid
          assign height = block.settings.image.width | divided_by: block.settings.image.aspect_ratio | round
          assign mHeight = block.settings.mobile_image.width | divided_by: block.settings.mobile_image.aspect_ratio | round
        %}
        {% if block.settings.image != blank %}
          {% assign bannerHalf = 'banner__media-image-half' %}
        {% endif %}
        {%- case block.type -%}
          {%- when 'slide' -%}
            <div
              class="swiper-slide {{ block.type }} slideshow-item"
              id="Slide-{{ section.id }}-{{ forloop.index }}"
              {{ block.shopify_attributes }}
              role="group"
              aria-roledescription="{{ 'sections.slideshow.slide' | t }}"
              aria-label="{{ forloop.index }} {{ 'general.slider.of' | t }} {{ forloop.length }}"
              tabindex="-1"
            >
              <div class="slideshow__media{% if block.settings.image == blank %} placeholder{% endif %}">
                <div class="banner__media media {% if block.settings.image == blank and block.settings.image_2 == blank %} placeholder{% endif %}{% if block.settings.image_2 != blank %} banner__media-half{% endif %}">
                  {%- if block.settings.image -%}
                    {%- if forloop.first %}
                      {{
                        block.settings.image
                        | image_url: width: 3840
                        | image_tag:
                          height: height,
                          sizes: sizes,
                          widths: widths,
                          fetchpriority: fetch_priority,
                          class: 'desktop-slider'
                      }}
                    {%- else -%}
                      {{
                        block.settings.image
                        | image_url: width: 3840
                        | image_tag:
                          loading: 'lazy',
                          height: height,
                          sizes: sizes,
                          widths: widths,
                          class: 'desktop-slider'
                      }}
                    {%- endif -%}
                  {%- else -%}
                    {{ 'hero-apparel-2' | placeholder_svg_tag: 'placeholder-svg' }}
                  {%- endif -%}
                </div>
                {%- if block.settings.image_2 != blank -%}
                  <div class="banner__media media{% if block.settings.image != blank %} banner__media-half{% endif %}">
                    {%- if forloop.first %}
                      {{
                        block.settings.image_2
                        | image_url: width: 3840
                        | image_tag:
                          height: mHeight,
                          sizes: sizes,
                          widths: widths,
                          fetchpriority: fetch_priority,
                          class: bannerHalf
                      }}
                    {%- else -%}
                      {{
                        block.settings.image_2
                        | image_url: width: 3840
                        | image_tag: loading: 'lazy', height: mHeight, sizes: sizes, widths: widths, class: bannerHalf
                      }}
                    {%- endif -%}
                  </div>
                {%- endif -%}
                {%- if block.settings.mobile_image -%}
                  {%- if forloop.first %}
                    {{
                      block.settings.mobile_image
                      | image_url: width: 1100
                      | image_tag:
                        height: mHeight,
                        sizes: sizes,
                        widths: mWidths,
                        fetchpriority: fetch_priority,
                        class: 'mobile-slider'
                    }}
                  {%- else -%}
                    {{
                      block.settings.mobile_image
                      | image_url: width: 1100
                      | image_tag:
                        loading: 'lazy',
                        height: mHeight,
                        sizes: sizes,
                        widths: mWidths,
                        class: 'mobile-slider'
                    }}
                  {%- endif -%}
                {%- endif -%}
              </div>
              <div class="slideshow__text-wrapper banner__content banner__content--{{ block.settings.box_align }} page-width{% if block.settings.show_text_box == false %} banner--desktop-transparent {% else %} banner-desktop{% endif %}">
                <div class="slideshow__text banner__box content-container content-container--full-width-mobile color-{{ block.settings.color_scheme }} gradient slideshow__text--{{ block.settings.text_alignment }} slideshow__text-mobile--{{ block.settings.text_alignment_mobile }}">
                  {%- if block.settings.subheading != blank -%}
                    <h6 class="banner__sub_heading sub-heading">{{ block.settings.subheading }}</h6>
                  {%- endif -%}
                  {%- if block.settings.heading != blank -%}
                    <h2 class="banner__heading {{ block.settings.heading_size }}">{{ block.settings.heading }}</h2>
                  {%- endif -%}
                  {%- if block.settings.text != blank -%}
                    <div class="banner__text" {{ block.shopify_attributes }}>
                      <span>{{ block.settings.text | escape }}</span>
                    </div>
                  {%- endif -%}
                  {%- if block.settings.button_label != blank -%}
                    <div class="banner__buttons">
                      {%- if block.settings.button_label != blank %}
                        <a{% if block.settings.link %} href="{{ block.settings.link }}"{% else %} role="link" aria-disabled="true"{% endif %} class="button button--primary">{{ block.settings.button_label | escape }}</a>
                      {%- endif -%}
                      {%- if block.settings.button_label_1 != blank %}
                        <a{% if block.settings.link_1 %} href="{{ block.settings.link_1 }}"{% else %} role="link" aria-disabled="true"{% endif %} class="button button--secondary">{{ block.settings.button_label_1 | escape }}</a>
                      {%- endif -%}
                    </div>
                  {%- endif -%}
                </div>
              </div>
            </div>
        {%- endcase -%}
      {%- endfor -%}
    </div>
    {% if section.settings.swiper_navigation %}
      <div class="slideshow-navigation">
        <div class="swiper-button-next"><span></span></div>
        <div class="swiper-button-prev"><span></span></div>
      </div>
    {% endif %}
  </div>
  <div class="swiper swiper-container gallery-thumbs-{{ section.id }} {% unless section.settings.show_thumb %}hidden {% endunless %}">
    <div class="swiper-wrapper">
      {%- for block in section.blocks -%}
        {%- case block.type -%}
          {%- when 'slide' -%}
            <div class="swiper-slide color-{{ block.settings.color_scheme }} gradient slideshow-thumb">
              {%- if block.settings.image != blank -%}
                <img
                  srcset="
                    {%- if block.settings.image.width >= 375 -%}{{ block.settings.image | image_url: width: 375 }} 375w,{%- endif -%}
                    {%- if block.settings.image.width >= 550 -%}{{ block.settings.image | image_url: width: 550 }} 550w,{%- endif -%}
                    {%- if block.settings.image.width >= 750 -%}{{ block.settings.image | image_url: width: 750 }} 750w,{%- endif -%}
                    {%- if block.settings.image.width >= 1100 -%}{{ block.settings.image | image_url: width: 1100 }} 1100w,{%- endif -%}
                    {%- if block.settings.image.width >= 1500 -%}{{ block.settings.image | image_url: width: 1500 }} 1500w,{%- endif -%}
                    {%- if block.settings.image.width >= 1780 -%}{{ block.settings.image | image_url: width: 1780 }} 1780w,{%- endif -%}
                    {%- if block.settings.image.width >= 2000 -%}{{ block.settings.image | image_url: width: 2000 }} 2000w,{%- endif -%}
                    {%- if block.settings.image.width >= 3000 -%}{{ block.settings.image | image_url: width: 3000 }} 3000w,{%- endif -%}
                    {%- if block.settings.image.width >= 3840 -%}{{ block.settings.image | image_url: width: 3840 }} 3840w,{%- endif -%}
                    {{ block.settings.image | image_url }} {{ block.settings.image.width }}w
                  "
                  sizes="100vw"
                  src="{{ block.settings.image | image_url: width: 3000 }}"
                  loading="lazy"
                  alt="{{ block.settings.image.alt | escape }}"
                  width="{{ block.settings.image.width }}"
                  height="{{ block.settings.image.width | divided_by: block.settings.image.aspect_ratio | round }}"
                  class="desktop-slider"
                >
              {%- else -%}
                {{ 'hero-apparel-2' | placeholder_svg_tag: 'placeholder-svg' }}
              {%- endif -%}
              <div class="nxt-arrow-icon">{% render 'collapsible-icon-caret' %}</div>
            </div>
        {% endcase %}
      {% endfor %}
    </div>
  </div>
</div>

<script>

slideShow(); 
  function slideShow() {
    var autopPlayTime = {{ section.settings.auto_pay }};
    if (parseInt(autopPlayTime) > 0) {
      const delayVal = parseInt(autopPlayTime * 1000);
       autoplay = {
         delay: delayVal,
         disableOnInteraction: false,
       };      
     }
      else{
         autoplay = false
      }   
   var galleryThumbs = new Swiper(".gallery-thumbs-{{ section.id }}", {
       loop: false,
      spaceBetween: 10,
      slidesPerView: 4,
      freeMode: true,
      watchSlidesProgress: true,
      direction: 'horizontal'
    });
    var galleryTop = new Swiper(".gallery-top-{{ section.id }}", {
      autoplay,
      loop: false,
      spaceBetween: 0,
      effect: "slide",
      navigation: {
        nextEl: ".swiper-button-next",
        prevEl: ".swiper-button-prev",
      },
       thumbs: {
        swiper: galleryThumbs,
      },
    });
     
}

document.addEventListener('shopify:block:select', function(event) {
  slideShow();
  const blockSelectedIsSlide = event.target.classList.contains('slideshow-item');
  if (!blockSelectedIsSlide) return;
  if (blockSelectedIsSlide) {
  slideShow();
  };
});

document.addEventListener('shopify:block:deselect', function(event) {
  const blockDeselectedIsSlide = event.target.classList.contains('slideshow-item');
  if (!blockDeselectedIsSlide) return;
if (blockDeselectedIsSlide) {
  slideShow();
  };
});

  document.addEventListener("shopify:section:load", function(event) {
  if (document.getElementById(`shopify-section-${event.detail.sectionId}`).classList.contains('slideshow')) {
   slideShow();  
  }
});     
  

document.addEventListener('shopify:section:reorder', () => slideShow());
document.addEventListener('shopify:section:select', () => slideShow());
document.addEventListener('shopify:section:deselect', () => slideShow());
document.addEventListener('shopify:inspector:activate', () => slideShow());
document.addEventListener('shopify:inspector:deactivate', () => slideShow());
</script>
{% schema %}
{
  "name": "t:sections.slideshow-thumbs.name",
  "tag": "section",
  "class": "section slideshow-thumbs",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type":"checkbox",
      "id":"page_full_width",
       "default": true,
      "label": "t:sections.all.page_full_width.label"
    },
    {
      "type":"checkbox",
      "id":"page_full_width_spacing",
       "default": false,
      "label": "t:sections.all.page_full_width_spacing.label"
    },
    {
      "type": "select",
      "id": "slide_height",
      "options": [

        {
          "value": "small",
          "label": "t:sections.slideshow-thumbs.settings.slide_height.options__2.label"
        },
        {
          "value": "medium",
          "label": "t:sections.slideshow-thumbs.settings.slide_height.options__3.label"
        },
        {
          "value": "large",
          "label": "t:sections.slideshow-thumbs.settings.slide_height.options__4.label"
        }
      ],
      "default": "medium",
      "label": "t:sections.slideshow-thumbs.settings.slide_height.label"
    },
    {
      "type": "checkbox",
      "id": "swiper_navigation",
      "default": false,
      "label": "t:sections.all.swiper.swiper_navigation"
    },
    {
      "type": "range",
      "id": "auto_pay",
      "min": 0,
      "max": 5,
      "unit": "s",
      "step": 1,
      "label": "t:sections.all.swiper.auto_play",
      "default": 0
    },
    {
    "type": "checkbox",
    "id": "show_thumb",
    "label": "t:sections.slideshow-thumbs.settings.show_thumb.label",
    "default": true
    },
     {
      "type": "header",
      "content": "t:sections.slideshow-thumbs.settings.mobile.content"
    },
    {
      "type": "checkbox",
      "id": "show_text_below",
      "label": "t:sections.slideshow-thumbs.settings.show_text_below.label",
      "default": false
    },
     {
          "type": "range",
          "id": "image_overlay_opacity",
          "min": 0,
          "max": 100,
          "step": 10,
          "unit": "%",
          "label": "t:sections.slideshow-thumbs.settings.image_overlay_opacity.label",
          "default": 0
        }
  ],
  "blocks": [
        {
      "type": "slide",
    "name": "t:sections.slideshow-thumbs.blocks.slide.name",
      "limit": 3,
      "settings": [
         {
          "type": "image_picker",
          "id": "image",
          "label": "t:sections.slideshow-thumbs.blocks.slide.settings.image.label"
        },
        {
      "type": "image_picker",
      "id": "image_2",
      "label": "t:sections.slideshow-thumbs.blocks.slide.settings.image_2.label"
    },
        {
          "type": "image_picker",
          "id": "mobile_image",
          "label": "t:sections.slideshow-thumbs.blocks.slide.settings.mobile_image.label"
        },
        {
          "type": "text",
          "id": "subheading",
          "default": "Image sub heading",
          "label": "t:sections.slideshow-thumbs.blocks.slide.settings.subheading.label"
        },
        {
        "type": "checkbox",
        "id": "show_content",
        "label": "t:sections.slideshow-thumbs.blocks.slide.settings.show_content.label",
        "default": true
        },
        {
          "type": "text",
          "id": "heading",
          "default": "Image slide",
          "label": "t:sections.slideshow-thumbs.blocks.slide.settings.heading.label"
        },
        {
          "type": "select",
          "id": "heading_size",
          "options": [
            {
              "value": "h3",
              "label": "t:sections.all.heading_size.options__1.label"
            },
            {
              "value": "h2",
              "label": "t:sections.all.heading_size.options__2.label"
            },
            {
              "value": "h1",
              "label": "t:sections.all.heading_size.options__3.label"
            }
          ],
          "default": "h2",
          "label": "t:sections.all.heading_size.label"
        },
		{
          "type": "text",
          "id": "text",
          "default": "Tell your brand's story through images",
          "label": "t:sections.slideshow-thumbs.blocks.slide.settings.text.label"
        },
        {
          "type": "text",
          "id": "button_label",
          "default": "Button label-1",
          "label": "t:sections.slideshow.blocks.slide.settings.button_label.label",
          "info": "t:sections.slideshow.blocks.slide.settings.button_label.info"
        },
        {
          "type": "url",
          "id": "link",
          "label": "t:sections.slideshow.blocks.slide.settings.link.label"
        },
        {
          "type": "text",
          "id": "button_label_1",
          "default": "Button label-2",
          "label": "t:sections.slideshow.blocks.slide.settings.button_label_1.label",
          "info": "t:sections.slideshow.blocks.slide.settings.button_label_1.info"
        },
        {
          "type": "url",
          "id": "link_1",
          "label": "t:sections.slideshow.blocks.slide.settings.link_1.label"
        },
        {
          "type": "checkbox",
          "id": "button_style_secondary",
          "label": "t:sections.slideshow-thumbs.blocks.slide.settings.secondary_style.label",
          "default": false
        },
        {
          "type": "select",
          "id": "box_align",
          "options": [
            {
              "value": "top-left",
              "label": "t:sections.slideshow-thumbs.blocks.slide.settings.box_align.options__1.label"
            },
            {
              "value": "top-center",
              "label": "t:sections.slideshow-thumbs.blocks.slide.settings.box_align.options__2.label"
            },
            {
              "value": "top-right",
              "label": "t:sections.slideshow-thumbs.blocks.slide.settings.box_align.options__3.label"
            },
            {
              "value": "middle-left",
              "label": "t:sections.slideshow-thumbs.blocks.slide.settings.box_align.options__4.label"
            },
            {
              "value": "middle-center",
              "label": "t:sections.slideshow-thumbs.blocks.slide.settings.box_align.options__5.label"
            },
            {
              "value": "middle-right",
              "label": "t:sections.slideshow-thumbs.blocks.slide.settings.box_align.options__6.label"
            },
            {
              "value": "bottom-left",
              "label": "t:sections.slideshow-thumbs.blocks.slide.settings.box_align.options__7.label"
            },
            {
              "value": "bottom-center",
              "label": "t:sections.slideshow-thumbs.blocks.slide.settings.box_align.options__8.label"
            },
            {
              "value": "bottom-right",
              "label": "t:sections.slideshow-thumbs.blocks.slide.settings.box_align.options__9.label"
            }
          ],
          "default": "bottom-left",
          "label": "t:sections.slideshow-thumbs.blocks.slide.settings.box_align.label",
          "info": "t:sections.slideshow-thumbs.blocks.slide.settings.box_align.info"
        },
        {
          "type": "checkbox",
          "id": "show_text_box",
          "label": "t:sections.slideshow-thumbs.blocks.slide.settings.show_text_box.label",
          "default": true
        },
        {
          "type": "select",
          "id": "text_alignment",
          "options": [
            {
              "value": "left",
              "label": "t:sections.slideshow-thumbs.blocks.slide.settings.text_alignment.option_1.label"
            },
            {
              "value": "center",
              "label": "t:sections.slideshow-thumbs.blocks.slide.settings.text_alignment.option_2.label"
            },
            {
              "value": "right",
              "label": "t:sections.slideshow-thumbs.blocks.slide.settings.text_alignment.option_3.label"
            }
          ],
          "default": "center",
          "label": "t:sections.slideshow-thumbs.blocks.slide.settings.text_alignment.label"
        },
        {
          "type": "color_scheme",
          "id": "color_scheme",
          "label": "t:sections.all.colors.label",
          "default": "scheme-1"
        },
        {
          "type": "header",
          "content": "t:sections.slideshow-thumbs.settings.mobile.content"
        },
        {
          "type": "select",
          "id": "text_alignment_mobile",
          "options": [
            {
              "value": "left",
              "label": "t:sections.slideshow-thumbs.blocks.slide.settings.text_alignment_mobile.options__1.label"
            },
            {
              "value": "center",
              "label": "t:sections.slideshow-thumbs.blocks.slide.settings.text_alignment_mobile.options__2.label"
            },
            {
              "value": "right",
              "label": "t:sections.slideshow-thumbs.blocks.slide.settings.text_alignment_mobile.options__3.label"
            }
          ],
          "default": "center",
          "label": "t:sections.slideshow-thumbs.blocks.slide.settings.text_alignment_mobile.label"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "t:sections.slideshow-thumbs.presets.name",
      "blocks": [
        {
          "type": "slide"
        },
        {
          "type": "slide"
        },
        {
          "type": "slide"
        }
      ]
    }
  ]
}
{% endschema %}
